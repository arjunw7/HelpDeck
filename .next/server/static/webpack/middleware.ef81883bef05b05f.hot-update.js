"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("middleware",{

/***/ "(middleware)/./middleware.ts":
/*!***********************!*\
  !*** ./middleware.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   middleware: () => (/* binding */ middleware)\n/* harmony export */ });\n/* harmony import */ var _supabase_auth_helpers_nextjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/auth-helpers-nextjs */ \"(middleware)/./node_modules/@supabase/auth-helpers-nextjs/dist/index.js\");\n/* harmony import */ var _supabase_auth_helpers_nextjs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_supabase_auth_helpers_nextjs__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(middleware)/./node_modules/next/dist/esm/server/web/exports/next-response.js\");\n\n\nasync function middleware(req) {\n    const res = next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_1__[\"default\"].next();\n    const supabase = (0,_supabase_auth_helpers_nextjs__WEBPACK_IMPORTED_MODULE_0__.createMiddlewareClient)({\n        req,\n        res\n    });\n    // Get hostname (e.g. demo.helpdeck.app, helpdeck.app)\n    const hostname = req.headers.get(\"host\") || \"\";\n    const isProd = \"development\" === \"production\";\n    const isPublicDomain = hostname.endsWith(\".helpdeck.app\") && hostname !== \"helpdeck.app\";\n    // Special case for localhost or development\n    // if (!isProd && req.headers.get('x-public-preview') === 'true') {\n    //   // Allow preview in development\n    //   return await handlePublicKnowledgeBase(req, res, supabase);\n    // }\n    // // Handle public knowledge base domains\n    // if (isPublicDomain) {\n    //   return await handlePublicKnowledgeBase(req, res, supabase);\n    // }\n    // Refresh session if it exists\n    const { data: { session } } = await supabase.auth.getSession();\n    // Public routes that don't require authentication\n    const publicRoutes = [\n        \"/\",\n        \"/auth\",\n        \"/features\",\n        \"/pricing\",\n        \"/ai\"\n    ];\n    const isPublicRoute = publicRoutes.some((route)=>req.nextUrl.pathname === route);\n    // If the route is public, allow access\n    if (isPublicRoute) {\n        return res;\n    }\n    // Protected routes\n    const protectedRoutes = [\n        \"/knowledge-base\",\n        \"/settings\"\n    ];\n    const isProtectedRoute = protectedRoutes.some((route)=>req.nextUrl.pathname.startsWith(route));\n    // If accessing a protected route and no session, redirect to login\n    // if (isProtectedRoute && !session) {\n    //   const redirectUrl = new URL('/auth', req.url);\n    //   redirectUrl.searchParams.set('redirectTo', req.nextUrl.pathname);\n    //   return NextResponse.redirect(redirectUrl);\n    // }\n    // Check trial status for protected routes\n    if (isProtectedRoute) {\n        const { data: subscription } = await supabase.from(\"subscriptions\").select(\"trial_end, status\").single();\n        const trialEnded = subscription?.trial_end && new Date(subscription.trial_end) < new Date();\n        const noActiveSubscription = !subscription?.status || subscription.status !== \"active\";\n        if (trialEnded && noActiveSubscription) {\n            // Redirect to pricing page if trial ended and no active subscription\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_1__[\"default\"].redirect(new URL(\"/pricing\", req.url));\n        }\n    }\n    return res;\n}\nasync function handlePublicKnowledgeBase(req, res, supabase) {\n    try {\n        // For local development, use a test organization slug\n        const hostname = req.headers.get(\"host\") || \"\";\n        const slug =  true ? \"procuzy\" : 0;\n        // Fetch organization and verify it's published\n        const { data: org } = await supabase.from(\"organizations\").select(`\n        *,\n        customize_settings (settings)\n      `).eq(\"slug\", slug).eq(\"is_published\", true).single();\n        if (!org) {\n            // Return 404 if org not found or not published\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_1__[\"default\"].rewrite(new URL(\"/not-found\", req.url));\n        }\n        // Create base response\n        const response = next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_1__[\"default\"].next();\n        // Add org data and settings to headers\n        response.headers.set(\"x-organization-id\", org.id);\n        response.headers.set(\"x-kb-settings\", JSON.stringify(org.customize_settings?.settings || {}));\n        // Rewrite to public knowledge base pages\n        const path = req.nextUrl.pathname;\n        const rewriteUrl = path === \"/\" ? \"/kb\" : `${path}`;\n        const url = new URL(rewriteUrl, req.url);\n        // Clone the response and rewrite the URL\n        const rewrittenResponse = next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_1__[\"default\"].rewrite(url, {\n            headers: response.headers\n        });\n        return rewrittenResponse;\n    } catch (error) {\n        console.error(\"Error in public knowledge base middleware:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_1__[\"default\"].rewrite(new URL(\"/not-found\", req.url));\n    }\n}\nconst config = {\n    matcher: [\n        /*\n     * Match all request paths except:\n     * - _next/static (static files)\n     * - _next/image (image optimization files)\n     * - favicon.ico (favicon file)\n     * - public folder\n     */ \"/((?!_next/static|_next/image|favicon.ico|public/).*)\"\n    ]\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKG1pZGRsZXdhcmUpLy4vbWlkZGxld2FyZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUF1RTtBQUM1QjtBQUdwQyxlQUFlRSxXQUFXQyxHQUFnQjtJQUMvQyxNQUFNQyxNQUFNSCxrRkFBWUEsQ0FBQ0ksSUFBSTtJQUM3QixNQUFNQyxXQUFXTixxRkFBc0JBLENBQUM7UUFBRUc7UUFBS0M7SUFBSTtJQUVuRCxzREFBc0Q7SUFDdEQsTUFBTUcsV0FBV0osSUFBSUssT0FBTyxDQUFDQyxHQUFHLENBQUMsV0FBVztJQUM1QyxNQUFNQyxTQUFTQyxrQkFBeUI7SUFDeEMsTUFBTUMsaUJBQWlCTCxTQUFTTSxRQUFRLENBQUMsb0JBQW9CTixhQUFhO0lBRTFFLDRDQUE0QztJQUM1QyxtRUFBbUU7SUFDbkUsb0NBQW9DO0lBQ3BDLGdFQUFnRTtJQUNoRSxJQUFJO0lBRUosMENBQTBDO0lBQzFDLHdCQUF3QjtJQUN4QixnRUFBZ0U7SUFDaEUsSUFBSTtJQUVKLCtCQUErQjtJQUMvQixNQUFNLEVBQUVPLE1BQU0sRUFBRUMsT0FBTyxFQUFFLEVBQUUsR0FBRyxNQUFNVCxTQUFTVSxJQUFJLENBQUNDLFVBQVU7SUFFNUQsa0RBQWtEO0lBQ2xELE1BQU1DLGVBQWU7UUFBQztRQUFLO1FBQVM7UUFBYTtRQUFZO0tBQU07SUFDbkUsTUFBTUMsZ0JBQWdCRCxhQUFhRSxJQUFJLENBQUNDLENBQUFBLFFBQVNsQixJQUFJbUIsT0FBTyxDQUFDQyxRQUFRLEtBQUtGO0lBRTFFLHVDQUF1QztJQUN2QyxJQUFJRixlQUFlO1FBQ2pCLE9BQU9mO0lBQ1Q7SUFFQSxtQkFBbUI7SUFDbkIsTUFBTW9CLGtCQUFrQjtRQUFDO1FBQW1CO0tBQVk7SUFDeEQsTUFBTUMsbUJBQW1CRCxnQkFBZ0JKLElBQUksQ0FBQ0MsQ0FBQUEsUUFBU2xCLElBQUltQixPQUFPLENBQUNDLFFBQVEsQ0FBQ0csVUFBVSxDQUFDTDtJQUV2RixtRUFBbUU7SUFDbkUsc0NBQXNDO0lBQ3RDLG1EQUFtRDtJQUNuRCxzRUFBc0U7SUFDdEUsK0NBQStDO0lBQy9DLElBQUk7SUFFSiwwQ0FBMEM7SUFDMUMsSUFBSUksa0JBQWtCO1FBQ3BCLE1BQU0sRUFBRVgsTUFBTWEsWUFBWSxFQUFFLEdBQUcsTUFBTXJCLFNBQ2xDc0IsSUFBSSxDQUFDLGlCQUNMQyxNQUFNLENBQUMscUJBQ1BDLE1BQU07UUFFVCxNQUFNQyxhQUFhSixjQUFjSyxhQUFhLElBQUlDLEtBQUtOLGFBQWFLLFNBQVMsSUFBSSxJQUFJQztRQUNyRixNQUFNQyx1QkFBdUIsQ0FBQ1AsY0FBY1EsVUFBVVIsYUFBYVEsTUFBTSxLQUFLO1FBRTlFLElBQUlKLGNBQWNHLHNCQUFzQjtZQUN0QyxxRUFBcUU7WUFDckUsT0FBT2pDLGtGQUFZQSxDQUFDbUMsUUFBUSxDQUFDLElBQUlDLElBQUksWUFBWWxDLElBQUltQyxHQUFHO1FBQzFEO0lBQ0Y7SUFFQSxPQUFPbEM7QUFDVDtBQUVBLGVBQWVtQywwQkFDYnBDLEdBQWdCLEVBQ2hCQyxHQUFpQixFQUNqQkUsUUFBYTtJQUViLElBQUk7UUFDRixzREFBc0Q7UUFDdEQsTUFBTUMsV0FBV0osSUFBSUssT0FBTyxDQUFDQyxHQUFHLENBQUMsV0FBVztRQUM1QyxNQUFNK0IsT0FBTzdCLEtBQXlCLEdBQWdCLFlBQVlKLENBQXNCO1FBRXhGLCtDQUErQztRQUMvQyxNQUFNLEVBQUVPLE1BQU00QixHQUFHLEVBQUUsR0FBRyxNQUFNcEMsU0FDekJzQixJQUFJLENBQUMsaUJBQ0xDLE1BQU0sQ0FBQyxDQUFDOzs7TUFHVCxDQUFDLEVBQ0FjLEVBQUUsQ0FBQyxRQUFRSCxNQUNYRyxFQUFFLENBQUMsZ0JBQWdCLE1BQ25CYixNQUFNO1FBRVQsSUFBSSxDQUFDWSxLQUFLO1lBQ1IsK0NBQStDO1lBQy9DLE9BQU96QyxrRkFBWUEsQ0FBQzJDLE9BQU8sQ0FBQyxJQUFJUCxJQUFJLGNBQWNsQyxJQUFJbUMsR0FBRztRQUMzRDtRQUVBLHVCQUF1QjtRQUN2QixNQUFNTyxXQUFXNUMsa0ZBQVlBLENBQUNJLElBQUk7UUFFbEMsdUNBQXVDO1FBQ3ZDd0MsU0FBU3JDLE9BQU8sQ0FBQ3NDLEdBQUcsQ0FBQyxxQkFBcUJKLElBQUlLLEVBQUU7UUFDaERGLFNBQVNyQyxPQUFPLENBQUNzQyxHQUFHLENBQUMsaUJBQWlCRSxLQUFLQyxTQUFTLENBQUNQLElBQUlRLGtCQUFrQixFQUFFQyxZQUFZLENBQUM7UUFFMUYseUNBQXlDO1FBQ3pDLE1BQU1DLE9BQU9qRCxJQUFJbUIsT0FBTyxDQUFDQyxRQUFRO1FBRWpDLE1BQU04QixhQUFhRCxTQUFTLE1BQU0sUUFBUSxDQUFDLEVBQUVBLEtBQUssQ0FBQztRQUNuRCxNQUFNZCxNQUFNLElBQUlELElBQUlnQixZQUFZbEQsSUFBSW1DLEdBQUc7UUFFdkMseUNBQXlDO1FBQ3pDLE1BQU1nQixvQkFBb0JyRCxrRkFBWUEsQ0FBQzJDLE9BQU8sQ0FBQ04sS0FBSztZQUNsRDlCLFNBQVNxQyxTQUFTckMsT0FBTztRQUMzQjtRQUVBLE9BQU84QztJQUNULEVBQUUsT0FBT0MsT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsOENBQThDQTtRQUM1RCxPQUFPdEQsa0ZBQVlBLENBQUMyQyxPQUFPLENBQUMsSUFBSVAsSUFBSSxjQUFjbEMsSUFBSW1DLEdBQUc7SUFDM0Q7QUFDRjtBQUVPLE1BQU1tQixTQUFTO0lBQ3BCQyxTQUFTO1FBQ1A7Ozs7OztLQU1DLEdBQ0Q7S0FDRDtBQUNILEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbWlkZGxld2FyZS50cz80MjJkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZU1pZGRsZXdhcmVDbGllbnQgfSBmcm9tIFwiQHN1cGFiYXNlL2F1dGgtaGVscGVycy1uZXh0anNcIjtcbmltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L3NlcnZlclwiO1xuaW1wb3J0IHR5cGUgeyBOZXh0UmVxdWVzdCB9IGZyb20gXCJuZXh0L3NlcnZlclwiO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbWlkZGxld2FyZShyZXE6IE5leHRSZXF1ZXN0KSB7XG4gIGNvbnN0IHJlcyA9IE5leHRSZXNwb25zZS5uZXh0KCk7XG4gIGNvbnN0IHN1cGFiYXNlID0gY3JlYXRlTWlkZGxld2FyZUNsaWVudCh7IHJlcSwgcmVzIH0pO1xuXG4gIC8vIEdldCBob3N0bmFtZSAoZS5nLiBkZW1vLmhlbHBkZWNrLmFwcCwgaGVscGRlY2suYXBwKVxuICBjb25zdCBob3N0bmFtZSA9IHJlcS5oZWFkZXJzLmdldCgnaG9zdCcpIHx8ICcnO1xuICBjb25zdCBpc1Byb2QgPSBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nO1xuICBjb25zdCBpc1B1YmxpY0RvbWFpbiA9IGhvc3RuYW1lLmVuZHNXaXRoKCcuaGVscGRlY2suYXBwJykgJiYgaG9zdG5hbWUgIT09ICdoZWxwZGVjay5hcHAnO1xuXG4gIC8vIFNwZWNpYWwgY2FzZSBmb3IgbG9jYWxob3N0IG9yIGRldmVsb3BtZW50XG4gIC8vIGlmICghaXNQcm9kICYmIHJlcS5oZWFkZXJzLmdldCgneC1wdWJsaWMtcHJldmlldycpID09PSAndHJ1ZScpIHtcbiAgLy8gICAvLyBBbGxvdyBwcmV2aWV3IGluIGRldmVsb3BtZW50XG4gIC8vICAgcmV0dXJuIGF3YWl0IGhhbmRsZVB1YmxpY0tub3dsZWRnZUJhc2UocmVxLCByZXMsIHN1cGFiYXNlKTtcbiAgLy8gfVxuXG4gIC8vIC8vIEhhbmRsZSBwdWJsaWMga25vd2xlZGdlIGJhc2UgZG9tYWluc1xuICAvLyBpZiAoaXNQdWJsaWNEb21haW4pIHtcbiAgLy8gICByZXR1cm4gYXdhaXQgaGFuZGxlUHVibGljS25vd2xlZGdlQmFzZShyZXEsIHJlcywgc3VwYWJhc2UpO1xuICAvLyB9XG5cbiAgLy8gUmVmcmVzaCBzZXNzaW9uIGlmIGl0IGV4aXN0c1xuICBjb25zdCB7IGRhdGE6IHsgc2Vzc2lvbiB9IH0gPSBhd2FpdCBzdXBhYmFzZS5hdXRoLmdldFNlc3Npb24oKTtcblxuICAvLyBQdWJsaWMgcm91dGVzIHRoYXQgZG9uJ3QgcmVxdWlyZSBhdXRoZW50aWNhdGlvblxuICBjb25zdCBwdWJsaWNSb3V0ZXMgPSBbJy8nLCAnL2F1dGgnLCAnL2ZlYXR1cmVzJywgJy9wcmljaW5nJywgJy9haSddO1xuICBjb25zdCBpc1B1YmxpY1JvdXRlID0gcHVibGljUm91dGVzLnNvbWUocm91dGUgPT4gcmVxLm5leHRVcmwucGF0aG5hbWUgPT09IHJvdXRlKTtcblxuICAvLyBJZiB0aGUgcm91dGUgaXMgcHVibGljLCBhbGxvdyBhY2Nlc3NcbiAgaWYgKGlzUHVibGljUm91dGUpIHtcbiAgICByZXR1cm4gcmVzO1xuICB9XG5cbiAgLy8gUHJvdGVjdGVkIHJvdXRlc1xuICBjb25zdCBwcm90ZWN0ZWRSb3V0ZXMgPSBbJy9rbm93bGVkZ2UtYmFzZScsICcvc2V0dGluZ3MnXTtcbiAgY29uc3QgaXNQcm90ZWN0ZWRSb3V0ZSA9IHByb3RlY3RlZFJvdXRlcy5zb21lKHJvdXRlID0+IHJlcS5uZXh0VXJsLnBhdGhuYW1lLnN0YXJ0c1dpdGgocm91dGUpKTtcblxuICAvLyBJZiBhY2Nlc3NpbmcgYSBwcm90ZWN0ZWQgcm91dGUgYW5kIG5vIHNlc3Npb24sIHJlZGlyZWN0IHRvIGxvZ2luXG4gIC8vIGlmIChpc1Byb3RlY3RlZFJvdXRlICYmICFzZXNzaW9uKSB7XG4gIC8vICAgY29uc3QgcmVkaXJlY3RVcmwgPSBuZXcgVVJMKCcvYXV0aCcsIHJlcS51cmwpO1xuICAvLyAgIHJlZGlyZWN0VXJsLnNlYXJjaFBhcmFtcy5zZXQoJ3JlZGlyZWN0VG8nLCByZXEubmV4dFVybC5wYXRobmFtZSk7XG4gIC8vICAgcmV0dXJuIE5leHRSZXNwb25zZS5yZWRpcmVjdChyZWRpcmVjdFVybCk7XG4gIC8vIH1cblxuICAvLyBDaGVjayB0cmlhbCBzdGF0dXMgZm9yIHByb3RlY3RlZCByb3V0ZXNcbiAgaWYgKGlzUHJvdGVjdGVkUm91dGUpIHtcbiAgICBjb25zdCB7IGRhdGE6IHN1YnNjcmlwdGlvbiB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdzdWJzY3JpcHRpb25zJylcbiAgICAgIC5zZWxlY3QoJ3RyaWFsX2VuZCwgc3RhdHVzJylcbiAgICAgIC5zaW5nbGUoKTtcblxuICAgIGNvbnN0IHRyaWFsRW5kZWQgPSBzdWJzY3JpcHRpb24/LnRyaWFsX2VuZCAmJiBuZXcgRGF0ZShzdWJzY3JpcHRpb24udHJpYWxfZW5kKSA8IG5ldyBEYXRlKCk7XG4gICAgY29uc3Qgbm9BY3RpdmVTdWJzY3JpcHRpb24gPSAhc3Vic2NyaXB0aW9uPy5zdGF0dXMgfHwgc3Vic2NyaXB0aW9uLnN0YXR1cyAhPT0gJ2FjdGl2ZSc7XG5cbiAgICBpZiAodHJpYWxFbmRlZCAmJiBub0FjdGl2ZVN1YnNjcmlwdGlvbikge1xuICAgICAgLy8gUmVkaXJlY3QgdG8gcHJpY2luZyBwYWdlIGlmIHRyaWFsIGVuZGVkIGFuZCBubyBhY3RpdmUgc3Vic2NyaXB0aW9uXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLnJlZGlyZWN0KG5ldyBVUkwoJy9wcmljaW5nJywgcmVxLnVybCkpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXM7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGhhbmRsZVB1YmxpY0tub3dsZWRnZUJhc2UoXG4gIHJlcTogTmV4dFJlcXVlc3QsXG4gIHJlczogTmV4dFJlc3BvbnNlLFxuICBzdXBhYmFzZTogYW55XG4pIHtcbiAgdHJ5IHtcbiAgICAvLyBGb3IgbG9jYWwgZGV2ZWxvcG1lbnQsIHVzZSBhIHRlc3Qgb3JnYW5pemF0aW9uIHNsdWdcbiAgICBjb25zdCBob3N0bmFtZSA9IHJlcS5oZWFkZXJzLmdldCgnaG9zdCcpIHx8ICcnO1xuICAgIGNvbnN0IHNsdWcgPSBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50JyA/ICdwcm9jdXp5JyA6IGhvc3RuYW1lLnNwbGl0KCcuJylbMF07XG4gICAgXG4gICAgLy8gRmV0Y2ggb3JnYW5pemF0aW9uIGFuZCB2ZXJpZnkgaXQncyBwdWJsaXNoZWRcbiAgICBjb25zdCB7IGRhdGE6IG9yZyB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdvcmdhbml6YXRpb25zJylcbiAgICAgIC5zZWxlY3QoYFxuICAgICAgICAqLFxuICAgICAgICBjdXN0b21pemVfc2V0dGluZ3MgKHNldHRpbmdzKVxuICAgICAgYClcbiAgICAgIC5lcSgnc2x1ZycsIHNsdWcpXG4gICAgICAuZXEoJ2lzX3B1Ymxpc2hlZCcsIHRydWUpXG4gICAgICAuc2luZ2xlKCk7XG5cbiAgICBpZiAoIW9yZykge1xuICAgICAgLy8gUmV0dXJuIDQwNCBpZiBvcmcgbm90IGZvdW5kIG9yIG5vdCBwdWJsaXNoZWRcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UucmV3cml0ZShuZXcgVVJMKCcvbm90LWZvdW5kJywgcmVxLnVybCkpO1xuICAgIH1cblxuICAgIC8vIENyZWF0ZSBiYXNlIHJlc3BvbnNlXG4gICAgY29uc3QgcmVzcG9uc2UgPSBOZXh0UmVzcG9uc2UubmV4dCgpO1xuXG4gICAgLy8gQWRkIG9yZyBkYXRhIGFuZCBzZXR0aW5ncyB0byBoZWFkZXJzXG4gICAgcmVzcG9uc2UuaGVhZGVycy5zZXQoJ3gtb3JnYW5pemF0aW9uLWlkJywgb3JnLmlkKTtcbiAgICByZXNwb25zZS5oZWFkZXJzLnNldCgneC1rYi1zZXR0aW5ncycsIEpTT04uc3RyaW5naWZ5KG9yZy5jdXN0b21pemVfc2V0dGluZ3M/LnNldHRpbmdzIHx8IHt9KSk7XG5cbiAgICAvLyBSZXdyaXRlIHRvIHB1YmxpYyBrbm93bGVkZ2UgYmFzZSBwYWdlc1xuICAgIGNvbnN0IHBhdGggPSByZXEubmV4dFVybC5wYXRobmFtZTtcblxuICAgIGNvbnN0IHJld3JpdGVVcmwgPSBwYXRoID09PSAnLycgPyAnL2tiJyA6IGAke3BhdGh9YDtcbiAgICBjb25zdCB1cmwgPSBuZXcgVVJMKHJld3JpdGVVcmwsIHJlcS51cmwpO1xuXG4gICAgLy8gQ2xvbmUgdGhlIHJlc3BvbnNlIGFuZCByZXdyaXRlIHRoZSBVUkxcbiAgICBjb25zdCByZXdyaXR0ZW5SZXNwb25zZSA9IE5leHRSZXNwb25zZS5yZXdyaXRlKHVybCwge1xuICAgICAgaGVhZGVyczogcmVzcG9uc2UuaGVhZGVycyxcbiAgICB9KTtcblxuICAgIHJldHVybiByZXdyaXR0ZW5SZXNwb25zZTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBwdWJsaWMga25vd2xlZGdlIGJhc2UgbWlkZGxld2FyZTonLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5yZXdyaXRlKG5ldyBVUkwoJy9ub3QtZm91bmQnLCByZXEudXJsKSk7XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcbiAgbWF0Y2hlcjogW1xuICAgIC8qXG4gICAgICogTWF0Y2ggYWxsIHJlcXVlc3QgcGF0aHMgZXhjZXB0OlxuICAgICAqIC0gX25leHQvc3RhdGljIChzdGF0aWMgZmlsZXMpXG4gICAgICogLSBfbmV4dC9pbWFnZSAoaW1hZ2Ugb3B0aW1pemF0aW9uIGZpbGVzKVxuICAgICAqIC0gZmF2aWNvbi5pY28gKGZhdmljb24gZmlsZSlcbiAgICAgKiAtIHB1YmxpYyBmb2xkZXJcbiAgICAgKi9cbiAgICAnLygoPyFfbmV4dC9zdGF0aWN8X25leHQvaW1hZ2V8ZmF2aWNvbi5pY298cHVibGljLykuKiknLFxuICBdLFxufTsiXSwibmFtZXMiOlsiY3JlYXRlTWlkZGxld2FyZUNsaWVudCIsIk5leHRSZXNwb25zZSIsIm1pZGRsZXdhcmUiLCJyZXEiLCJyZXMiLCJuZXh0Iiwic3VwYWJhc2UiLCJob3N0bmFtZSIsImhlYWRlcnMiLCJnZXQiLCJpc1Byb2QiLCJwcm9jZXNzIiwiaXNQdWJsaWNEb21haW4iLCJlbmRzV2l0aCIsImRhdGEiLCJzZXNzaW9uIiwiYXV0aCIsImdldFNlc3Npb24iLCJwdWJsaWNSb3V0ZXMiLCJpc1B1YmxpY1JvdXRlIiwic29tZSIsInJvdXRlIiwibmV4dFVybCIsInBhdGhuYW1lIiwicHJvdGVjdGVkUm91dGVzIiwiaXNQcm90ZWN0ZWRSb3V0ZSIsInN0YXJ0c1dpdGgiLCJzdWJzY3JpcHRpb24iLCJmcm9tIiwic2VsZWN0Iiwic2luZ2xlIiwidHJpYWxFbmRlZCIsInRyaWFsX2VuZCIsIkRhdGUiLCJub0FjdGl2ZVN1YnNjcmlwdGlvbiIsInN0YXR1cyIsInJlZGlyZWN0IiwiVVJMIiwidXJsIiwiaGFuZGxlUHVibGljS25vd2xlZGdlQmFzZSIsInNsdWciLCJzcGxpdCIsIm9yZyIsImVxIiwicmV3cml0ZSIsInJlc3BvbnNlIiwic2V0IiwiaWQiLCJKU09OIiwic3RyaW5naWZ5IiwiY3VzdG9taXplX3NldHRpbmdzIiwic2V0dGluZ3MiLCJwYXRoIiwicmV3cml0ZVVybCIsInJld3JpdHRlblJlc3BvbnNlIiwiZXJyb3IiLCJjb25zb2xlIiwiY29uZmlnIiwibWF0Y2hlciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(middleware)/./middleware.ts\n");

/***/ })

});